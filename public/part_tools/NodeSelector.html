<div class="lift:NodeSelector">
	<head>

		<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
		<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
		<script src="/js/jquery.ui.autocomplete.scroll.min.js"></script>
		<style type="text/css"> 
			ul.ui-autocomplete {
				    z-index: 5000;
			 }
			
		</style>
		<script type="text/javascript">
			jQuery(document).ready(function() {
        var inFlightCount = 0;
				jQuery('#newNodeModal-createButton').toggleClass('disabled',true)

				jQuery("#node_search_auto").autocomplete({
							minLength: 3,
							maxShowItems: 20,
              delay: 500,
							source: function(request,response){
                jQuery('.loading').show();
                inFlightCount = inFlightCount + 1;
								function callResponse(responseData){
									console.log("got response data")
									//console.log(responseData)
                  inFlightCount = inFlightCount - 1;
                  if(inFlightCount === 0) //only hide spinner when last query finishes
                    jQuery('.loading').hide();
									response(responseData)
								}
								fetchSuggestions(request,callResponse);
							},
							select: function(event,ui){
								console.log("item selected")
								//console.log(ui)
								sendSelectedNodeNumberToServer(ui.item.value);
								ui.item.value=ui.item.label

							}
						})
			 })
		</script>
	</head>
	<div id="nodeSelectorCallbacks"></div>

	Node Selector

  <div class="form-inline">
    <input id="node_search_auto" class="form-control" style="width: 90%;" type="text"/>
    <img src='/img/spinner.gif' class='loading' style="display: none"/>
  </div>


	<div id="selected_node"></div>

</div>
