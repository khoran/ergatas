
<div class="container-fluid">
    <div class="row">
        <div class="col-xl-2 col-md-3 col-sm-4 d-flex flex-sm-column flex-wrap dashboard-menu"  xstyle="border-right-width: 1px; border-right-style: solid;">

            <span class="mb-4" style="padding: .375rem .75rem;" data-bind="text: $root.loggedInUser() && $root.loggedInUser().email"></span>

            <button class="btn btn-outline-dark " 
                data-bind="visible: $root.loggedInUser() && ! $root.loggedInUser().is_org_admin(), click: $root.navigateFn('profile')">
                <i class="fas fa-edit"></i> 
                <text data-bind=" text: $root.hasProfile() ? 'Edit Profile' : 'Create New Profile' "></text>
            </button>
            <!-- this version is for profile managers (org_admin), that takes them to manage profiles list to find their own profile-->
            <button class="btn btn-outline-dark " 
                data-bind="visible: $root.loggedInUser() &&  $root.loggedInUser().is_org_admin(), click: () => dashboardPage('managed-profiles-list')">
                <i class="fas fa-edit"></i> Edit Profile </button>
            <button class="btn btn-outline-dark " href="#" data-bind="click: ()=>dashboardPage('saved-searches')"> 
                <i class="fas fa-save"></i> Saved Searches</button>
            <button class="btn btn-outline-dark " id="landing_page_button" href="#" data-bind="visible: ! $root.hasRole('profile_manager'),click: $root.navigateFn('claim-org') ">
                <i class="fas fa-building"></i> Landing Page</button>

            <button class="btn btn-outline-dark" data-bind="click: () => dashboardPage('donation-list')">
                <i class="fas fa-donate"></i> Donations</button>

            <button class="btn btn-outline-dark" data-bind="visible: $root.hasRole('profile_manager'), click: () => dashboardPage('manage-org')">
                <i class="fas fa-cogs"></i> Manage Organization</button>
            <button class="btn btn-outline-dark" data-bind="visible: $root.hasRole('profile_manager'), click: () => dashboardPage('managed-profiles-list')">
                <i class="fas fa-users"></i> Managed Profiles</button>


 
            <div class="my-5" data-bind="if: $root.hasRole('organization_review')" >
                <button class="btn btn-outline-dark" 
                    data-bind="click: () => dashboardPage('pending-organizations')">Pending Organizations</button>
                <button class="btn btn-outline-dark" 
                    data-bind="click: () => dashboardPage('reports')">Reports</button>
                <button class="btn btn-outline-dark" 
                    data-bind="click: () => dashboardPage('message-moderation')">Message Moderation</button>
                <button class="btn btn-outline-dark" data-bind="click: () => dashboardPage('wiki-page')">
                    <i class="fas fa-book"></i> Wiki Pages</button>
                <button class="btn btn-outline-dark" data-bind="visible: $root.hasRole('organization_review'), click: () => dashboardPage('org-editor')">
                    <i class="fas fa-cogs"></i> Organization Editor</button>
            </div>



            <button class="btn btn-outline-dark "  data-bind="click: $root.signOut">
                <i class="fas fa-sign-out-alt"></i> Sign Out</button>
            <button class="btn btn-outline-danger btn-sm mt-sm-4 " data-bind="click: $root.deleteAccount">
                <i class="fas fa-trash-alt"></i> Delete Account</button>
        </div>
        <div class="col-xl-10 col-md-9 col-sm-8">

            <div data-bind="template: {name: dashboardPage}"></div>

        </div>
    </div>
</div>

<script type="text/html" id="dashboard-home">
    <div class="row my-5" data-bind="with: stats">
        <div class="col">
            <span class="mr-4 text-nowrap"><i class="fas fa-eye"></i> Page Views: <span  data-bind="text: pageViews"></span></span>
            <span class="mr-4 text-nowrap"><i class="fas fa-donate"></i> Donation Clicks: <span data-bind="text: donationClicks"></span></span>
            <span class="text-nowrap"><i class="fas fa-praying-hands"></i> Prayers: <span data-bind="text: prayers"></span></span>
        </div>
    </div>
</script>
<script type="text/html" id="manage-org">
    <manage-org params="user: $component.user, appState: $root.appState"></manage-org>
</script>

<script type="text/html" id="donation-list">
    <donation-list params="appState: $root.appState, singleProfile: $component.singleProfile"></donation-list>
</script>

<script type="text/html" id="wiki-page">
    <manage-wiki-pages params="appState: $root.appState"></manage-wiki-pages>
</script>

<script type="text/html" id="managed-profiles-list">
    <managed-profiles-list params="appState: $root.appState"></managed-profiles-list>
</script>

<script type="text/html" id="org-editor">
    <org-editor params="appState: $root.appState"></org-editor>
</script>

<script type="text/html" id="saved-searches">
    <saved-search-list params="user: $root.loggedInUser, da: da,search:$component.appState.search,navigateFn: $root.navigateFn "></saved-search-list>
</script>
<script type="text/html" id="pending-organizations">
    <pending-organizations params="da: da, server: server, storage:storage"></pending-organizations>
</script>
<script type="text/html" id="reports">
    <reports params="da: da, server: server"></reports>
</script>
<script type="text/html" id="message-moderation">
    <message-moderation params="da: da, server: server"></message-moderation>
</script>

