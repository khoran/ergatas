<div class="manage-wiki-pages component">

    <div class="d-flex justify-content-between align-items-center">
        <h3 class="mb-0">Wiki Pages</h3>
        <button class="btn " data-bind="click: $component.createNewPage" aria-label="Create new page" title="Create new page">
            <i class="fas fa-plus fa-2x" aria-hidden="true"></i>
            <span class="sr-only">New Page</span>
        </button>
    </div>

    <!-- loading state -->
    <div data-bind="visible: loading()">
        <small>Loading pages...</small>
    </div>

    <!-- list of pages -->
    <ul class="list-group" data-bind="foreach: pages">
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <strong data-bind="text: data && data.title ? data.title : slug"></strong>
                <div class="small text-muted" data-bind="text: slug"></div>
            </div>

            <div>
                <a data-bind="attr: { href: $component.viewPageHref($data) }" class="btn mr-2" aria-label="View page" title="View page">
                    <i class="fas fa-eye fa-2x" aria-hidden="true"></i>
                    <span class="sr-only">View</span>
                </a>
                <button class="btn " data-bind="click: $component.startEdit" aria-label="Edit page" title="Edit page">
                    <i class="fas fa-edit fa-2x" aria-hidden="true"></i>
                    <span class="sr-only">Edit</span>
                </button>
                <button class="btn text-danger ml-2" data-bind="click: function(){ $component.deletePage($data) }" aria-label="Delete page" title="Delete page">
                    <i class="fas fa-trash fa-2x" aria-hidden="true"></i>
                    <span class="sr-only">Delete</span>
                </button>
            </div>
        </li>
    </ul>

    <!-- editor area -->
    <div data-bind="with: editing">
    <h4 class="mt-4">Editing <span data-bind="text: $component.editCopy() && $component.editCopy().slug ? $component.editCopy().slug() : slug"></span></h4>

        <div class="form-group">
            <label>Slug</label>
            <input class="form-control" data-bind="value: $component.editCopy().slug" />
            <small class="form-text text-muted">Change the page slug (letters, numbers, hyphen, slash). Be careful â€” changing the slug will change the page URL.</small>
        </div>

        <div class="form-group">
            <label>Title</label>
            <input class="form-control" data-bind="value: $component.editCopy().title" />
        </div>

        <div class="form-group">
            <label>Body</label>
            <div data-bind="editor: $component.editCopy().body, editorOptions:{autogrow:true,resetCss:true}"></div>
        </div>

        <div class="form-group">
            <label>Sidebar</label>
            <div data-bind="editor: $component.editCopy().sidebar, editorOptions:{autogrow:true,resetCss:true}"></div>
        </div>

        <div class="form-group">
            <button class="btn btn-ergatas-primary" data-bind="click: $component.saveEdit">Save</button>
            <button class="btn btn-secondary ml-2" data-bind="click: $component.cancelEdit">Cancel</button>
            <button class="btn btn-danger ml-2" data-bind="click: function(){ $component.deletePage($component.editing()) }">Delete</button>
        </div>
    </div>

    <div data-bind="if: pages().length === 0 && !loading()">
        <p class="text-muted">No pages found.</p>
    </div>

</div>
