<div class="wiki-page component">

    <div class="d-flex justify-content-between align-items-center">
        <h3 class="mb-0">Pages</h3>
        <button class="btn btn-sm btn-ergatas-primary" data-bind="click: $component.createNewPage">+ New Page</button>
    </div>

    <!-- loading state -->
    <div data-bind="visible: loading()">
        <small>Loading pages...</small>
    </div>

    <!-- list of pages -->
    <ul class="list-group" data-bind="foreach: pages">
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <strong data-bind="text: data && data.title ? data.title : slug"></strong>
                <div class="small text-muted" data-bind="text: slug"></div>
            </div>

            <div>
                <a data-bind="attr: { href: $component.viewPageHref($data) }" class="btn btn-sm btn-outline-secondary mr-2">View</a>
                <button class="btn btn-sm btn-primary" data-bind="click: $component.startEdit">Edit</button>
            </div>
        </li>
    </ul>

    <!-- editor area -->
    <div data-bind="with: editing">
        <h4 class="mt-4">Editing <span data-bind="text: slug"></span></h4>

        <div class="form-group">
            <label>Title</label>
            <input class="form-control" data-bind="value: $component.editCopy().title" />
        </div>

        <div class="form-group">
            <label>Body</label>
            <div data-bind="editor: $component.editCopy().body, editorOptions:{autogrow:true,resetCss:true}"></div>
        </div>

        <div class="form-group">
            <label>Sidebar</label>
            <div data-bind="editor: $component.editCopy().sidebar, editorOptions:{autogrow:true,resetCss:true}"></div>
        </div>

        <div class="form-group">
            <button class="btn btn-ergatas-primary" data-bind="click: $component.saveEdit">Save</button>
            <button class="btn btn-secondary ml-2" data-bind="click: $component.cancelEdit">Cancel</button>
        </div>
    </div>

    <div data-bind="if: pages().length === 0 && !loading()">
        <p class="text-muted">No pages found.</p>
    </div>

</div>
